[[ariaid-title1]]
== Формирование карты этапов

[.dfn .term]_Карта этапов_ определяет этапы, входящие в состав маршрута, а также условия перехода между ними (в зависимости от результатов завершения предыдущих этапов).

При настройке маршрута согласования нужно учитывать принцип, по которому выбираются этапы согласования:

. При завершении каждого этапа согласования осуществляется поиск следующего этапа, для которого выполняется условие старта и который не запускался в данном цикле согласования.
. Если подходящий этап не найден:
* Если все этапы данного цикла завершены положительно – согласование завершается.
* Если есть не положительно-завершенные этапы – запускается новый цикл согласования.
+
Автоматический переход на новый цикл согласования можно исключить, добавив этап консолидации (можно без участников) после этапов, которые могут завершиться условно-положительно.

Чтобы настроить карту этапов, выполните следующие действия:

. [.ph .cmd]#Создайте или откройте ранее созданную карточку [.keyword .parmname]_Маршрут согласования_.#
. [.ph .cmd]#В области [.keyword]*Карта этапов* нажмите на кнопку image:img/Buttons/add_green_plus.png[image] [.keyword]*Добавить*.#
+
В таблице появится строка для настройки этапа.

image::img/Path_RoadMap_add.png[[.fig--title-label]##Рис. 1. ##Поля для настройки этапа в 'Карте этапов']
. [.ph .cmd]#Нажмите image:img/Buttons/threedots.png[image] и выберите карточку этапа из созданных ранее.#
+
Одна и та же карточка [.keyword .parmname]_Этап согласования_ может быть использована в разных маршрутах.
+
Один этап можно добавить в один маршрут только один раз. Повторно добавлять тот же этап в маршрут запрещено. Повторные запуски этапа возможны в последующих циклах прохождения маршрута.
+
Допускается добавление новых этапов даже в те маршруты, по которым на момент добавления выполняется активное согласование документов. При удовлетворении условий запуска, новый этап может быть пройден уже в текущем цикле согласования. Аналогично, при удалении этапа из активного маршрута, изменения будут применены в текущем цикле согласования.
. [.ph .cmd]#Повторяйте шаги 2-3 до тех пор, пока не будут добавлены все необходимые этапы. #
. [.ph .cmd]#xref:Start_conditions.adoc[Задайте] условия старта для всех этапов, кроме первого.#
+
[NOTE]
====
[.note__title]#Внимание:# Условия старта нужно задавать после добавления в маршрут всех этапов.
====
+
В [.keyword]*Карте этапов* столбцы [.keyword]*Тип согласования*, [.keyword]*Согласующие* и [.keyword]*Длительность* будут автоматически заполнены исходя из данных карточки [.keyword .parmname]_Этап согласования_.
. [.ph .cmd]#Чтобы этапы отображались в карте в соответствии с заданными условиями старта, воспользуйтесь кнопками image:img/Buttons/arrow_up_green.png[image] и image:img/Buttons/arrow_down_green.png[image] для перемещения записей этапов вверх или вниз по списку. #
+
Отображение этапов в таблице никак не влияет на фактический порядок старта этапов, который определяется заданными для этапа условиями.

* *xref:../pages/Start_conditions.adoc[Условия старта этапов в маршруте]* +

*На уровень выше:* xref:../pages/Approval_path.adoc[Настройка маршрутов согласования]
