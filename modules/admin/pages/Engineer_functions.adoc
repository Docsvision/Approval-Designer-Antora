= Настройка согласований

Модуль _Конструктор согласований_ позволяет создавать различные виды расширенных согласований, отражающих потребности документооборота конкретного предприятия.

Общий принцип настройки согласований состоит в формировании некоторого набора вариантов (этапов) согласований, а затем - объединения данных вариантов в группы (маршруты). Например, одним из этапов согласования может быть согласование проекта договора руководителями, а другим - согласование этого же документа юридическим отделом. Маршрут согласования может включать оба этапа, где сначала будет выполняться согласование руководителями, а затем - юристами.

image::Approval_example.png[Пример маршрута согласования, включающего несколько этапов]

В поставляемом решении отсутствуют какие-либо этапы и маршруты, созданные при помощи конструктора. Настройка вариантов расширенных согласований выполняется администратором модуля самостоятельно.

Для обеспечения работоспособности модуля _Конструктор согласований_, администратору необходимо выполнить ряд настроек:

. xref:Approval_stage.adoc[Создать и настроить] карточки _Этап согласования_.
. xref:Approval_path.adoc[Создать и настроить] карточки _Маршрут согласования_, указать этапы, входящие в маршрут, и условия перехода между ними.
. xref:TemplateCard_create.adoc[Создать шаблон] карточки _Согласования КС_, связать её с необходимым маршрутом.
. В _Справочнике видов карточек_ xref:Set_card_create_mode_consent.adoc[настроить создание согласования] из карточки документа.

image::Admin_process.png[Последовательность настройки расширенных согласований]

Таким образом, обычные пользователи, в задачи которых входит запуск согласований, увидят в карточках документов только те варианты расширенных согласований, которые будут настроены администратором. Причем, набор доступных согласований будет определяться видом документа. Для *Инициатора* согласования может быть настроена возможность частичного xref:StageParams_change_stage_before_start.adoc[изменения настроек] этапа перед стартом и при управлении активным согласованием.

После запуска согласования для пользователей, назначенных согласующими, формируются задания на согласование. В каждом задании присутствует набор возможных xref:StageParams_task_decisions.adoc[вариантов] (кнопок) для принятия решений, определенный администратором. Результат выполнения этапа определяется набором установленных xref:Approving_finish.adoc[правил], и зависит от того, какие именно решения будут вынесены согласующими. Если все этапы завершатся положительно, процесс согласования будет завершен. При необходимости, возможно также xref:Approving_finish.adoc[принудительное завершение] согласования.
