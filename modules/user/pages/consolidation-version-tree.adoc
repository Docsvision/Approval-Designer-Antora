= Дерево версий в режиме консолидации

В карточке задания на консолидацию, на вкладке _Версии и комментарии_, отображается дерево версий. Дерево версий позволяет просматривать и редактировать файлы. Каждый файл отображается на отдельной вкладке.

include::partial$excerpts.adoc[tags=mode]

//TODO: скрин устарел!!!
.Элемент для работы с версиями файлов в режиме "Согласование"
image::version-tree.png[Элемент для работы с версиями файлов в режиме "Согласование"]

Работа с деревом версий в заданиях на консолидацию аналогична xref:approval-version-tree.adoc[режиму согласование] со следующими отличиями.

Условные обозначения в заданиях на консолидацию::
В заданиях на консолидацию каждая версия в дереве отмечается специальными иконками или выделяется стилем начертания:
+
* image:buttons/consolidation-start.png[Строки с узлами в квадрате] -- начальная версия этапа консолидации.
* image:buttons/consolidation-merge.png[Две линии с узлами] -- версии для объединения (в очереди консолидации текущего этапа).
* image:buttons/consolidation-final.png[Две линии с узлами объединяются в стрелку вправо] -- итоговая версия.
* image:buttons/version-other.png[Узел на линии] -- прочие версии.
* Жирным шрифтом обозначается итоговая версия этапа, из которого было создано текущее задание.
* Жирным шрифтом и звездочкой выделяются версии, которые ещё не были обработаны консолидатором.

На этапе консолидации в дереве будет по умолчанию выделена начальная версия этапа консолидации. Начальной версией этапа считается итоговая версия предыдущих этапов с учётом всех повторных запусков.

Консолидатор может xref:consolidation-files.adoc[объединить версии] файлов.

.На следующий этап будет передана:
* Версия консолидатора -- если консолидация выполнялась.
* Версия согласующего -- если в этапе была создана только одна версия.
* Исходная версия этапа -- если в этапе было создано несколько версий.

[#open-version]
== Открытие версии файла на чтение или редактирование

.Открытый файл можно редактировать только, если соблюдаются следующие условия:
* Файл был открыт из дерева версий в карточке задания.
* Доступна операция редактирования файлов.
* Версия создана из текущего задания текущим пользователем.

Если вы хотите сохранить внесённые изменения, при закрытии файла будет предложено выбрать место для его сохранения в файловой системе.

[#ops-availability]
== Доступность операций с файлами в режиме "Консолидация"

[cols="32%,15%,15%,19%,19%",options="header"]
|===
|Операция/тип версии |Корневая версия |Версия цикла |Исходная версия этапа |Версия согласующего

|Просмотреть |Да |Да |Да |Да

|Открыть на чтение |Да |Да |Да |Да

|Открыть на редактирование | | | |

|Удалить | | | |

|Комментировать | | | |Да

|Взять в качестве консолидируемой | |Да |Да |Да

|Сделать версию текущей | |Да |Да |Да

|Загрузить из файла | | |Да |

|Объединить версии | | |Да |
|===

[cols="37%,17%,23%,23%",options="header"]
|===
|Операция/тип версии |Объединенная версия этапа |Консолидируемая версия |Консолидированная версия

|Просмотреть |Да |Да |Да

|Открыть на чтение |Да |Да |Да

|Открыть на редактирование | |Да, если текущий сотрудник -- автор |

|Удалить | |Да, если текущий сотрудник -- автор |

|Комментировать | |Да |

|Взять в качестве консолидируемой |Да | |

|Сделать версию текущей |Да |Да |

|Загрузить из файла | |Да |

|Объединить версии | | |
|===
