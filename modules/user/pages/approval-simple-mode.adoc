= Упрощенная работа с файлами на согласовании

Для согласующего, помимо xref:consolidation-version-tree.adoc[обычной] работы с версиями файлов, предусмотрен вариант упрощенной работы с файлами.

Данный способ предназначен для работы только с собственными версиями согласующего для текущего этапа. В карточке задания на согласование у данного пользователя будет доступна вкладка _Файлы для согласования_.

[NOTE]
====
Упрощенный режим является единственным доступным вариантом xref:signing.adoc#files[работы с файлами] в режиме _Подписание_.
====

Данный способ работы только визуально упрощает работу с собственными версиями файлов. Элементы интерфейса для обычной и упрощенной работы с файлами синхронизированы. При необходимости можно в любой момент перейти из расширенного режима в упрощенный и наоборот.

Если для этапа настроен тип маршрутизации _параллельный_, версии других участников согласования в данном режиме не отображаются, и создание собственных версий на их основе недоступно.

Если для этапа настроен тип маршрутизации _последовательный_ или _альтернативный_, на вкладке _Файлы для согласования_ может быть доступна версия файла с исправлениями всех предыдущих согласующих данного этапа (см. xref:consolidation-version-tree.adoc[Особенности работы с версиями и комментариями к версиям]).

.Вкладка "Файлы для согласования" для упрощенной работы с файлами
image::files-simple.png[Вкладка "Файлы для согласования" для упрощенной работы с файлами]

[#version-view]
== Просмотр версии файла этапа

В упрощенном режиме работы согласующий может просмотреть _Исходную версию этапа_ и последнюю созданную им версию на данном этапе. Просмотр доступен для файлов в формате `.txt`, Microsoft Word, Microsoft Excel, `.pdf`.

.Чтобы просмотреть файл:
. Откройте карточку задания на согласование.
. Перейдите на вкладку _Файлы для согласования_.
. Выберите файл, затем нажмите кнопку *Просмотреть*.
+
Во встроенном средстве просмотра будет открыта либо xref:consolidation-version-tree.adoc["Исходная версия этапа"], либо последняя версия, которая была создана или отредактирована в упрощенном режиме на данном этапе.
+
.Просмотр версии в упрощенном режиме работы с файлами
image::simple-view.png[Просмотр версии в упрощенном режиме работы с файлами]
+
. Ознакомьтесь с версией файла.
. Закройте файл.

При использовании усовершенствованного согласования отображается последняя версия файла, созданная из текущего задания любым участником согласования. +
В случае делегирования, для делегата отображается версия делегировавшего. При возврате с делегирования будет отображена версия делегата.

[#file-edit]
== Редактирование файла

В упрощенном режиме работы с файлами согласующим может быть отредактирована _Исходная версия этапа_ или последняя добавленная собственная версия, если файл одного из следующих форматов:
include::partial$extensions.adoc[tags=long]
Файлы других форматов открываются только на чтение.

[NOTE]
====
Если на компьютере, где установлен клиент {dv}, установлено приложение Microsoft Word, но по умолчанию для текстовых документов форматов `.doc`, `.docx`, `.rtf` выбран другой текстовый редактор, согласуемые файлы будут открываться в Microsoft Word.

Приоритет отдаётся редактору Microsoft Word, т.к. при создании версий и автоконсолидации важен режим рецензирования.
====

.Чтобы внести изменения в "Исходную версию этапа":
. Откройте карточку задания на согласование.
. Перейдите на вкладку _Файлы на согласовании_.
. Выберите файл, затем дважды щелкните левой клавишей мыши по его названию. +
Дальнейшая логика формирования версий будет зависеть от следующих условий:
+
* Версии создаются после изменения файла.
* Если версия была создана из текущего задания текущим пользователем, изменения будут сохранены, но новая версия не будет создана.
* Если версия была создана из текущего задания другим пользователем (например, делегатом), будет создана новая подчинённая версия текущего сотрудника.
* Новая версия создаётся как подчинённая для версии, открытой для редактирования.
+
Новая версия будет создана, если из текущего задания ещё не было создано версий. Созданная версия будет являться подчинённой для начальной версии согласующего.
+
* Количество файлов, открываемых одновременно в режиме редактирования, не ограничено.
* Если попытаться повторно открыть уже открытый на редактирование файл, будет выдано предупреждение: `Файл уже редактируется вами`.
+
[WARNING]
====
При редактировании файла Microsoft Office, открытого из карточки, следует избегать параллельного открытия файлов с аналогичным именем из других источников, т.к. это может привести к невозможности сохранения изменений файла в карточку.
====
+
//На вкладке _Версии и комментарии_ будет автоматически создана новая версия файла. Именно она в упрощенном режиме будет открыта у пользователя в режиме редактирования.
* Если выбран файл формата Microsoft Word, в документе будет включен режим исправлений.
+
. Внесите изменения в файл.
+
Для файлов формата Microsoft Word изменения будут отображаться в режиме исправлений.
+
. Сохраните и закройте файл.
+
include::partial$excerpts.adoc[tags=on-finish]
+
. На вкладке _Файлы для согласования_ станет доступной версия файла с внесенными изменениями.

[#version-compare]
== Сравнение версий

Для файлов формата Microsoft Word в упрощенном режиме согласующий может выполнить сравнение версий. Сравнение выполняется между выбранной версией текущего этапа и _Исходной версией_ данного этапа, а также, если согласующий уже принимал участие в согласовании, с версией другого этапа (или экземпляра этапа) того же цикла.

[WARNING]
====
Для файлов формата, отличного от форматов Microsoft Word, сравнение версий не производится.
====

.Чтобы сравнить версии:
. Откройте карточку задания на согласование.
. Перейдите на вкладку _Файлы для согласования_.
. Выберите файл, который требуется сравнить с версией, согласуемой на данном этапе.
. Нажмите на кнопку *Показать изменения*.
+
NOTE: В xref:admin:route-advanced.adoc[усовершенствованном согласовании] кнопка *Показать изменения* сравнивает текущую версию с финальной версией этого этапа на предыдущем экземпляре этапа или цикле.
+
Команда доступна, если данный согласующий уже принимал участие в согласовании.
+
NOTE: При использовании усовершенствованного согласования, команда не отображается на первом экземпляре этапа.
+
Будет открыт редактор Microsoft Word в режиме сравнения версий, в котором будет отображена _Исходная версия этапа_ и исходная версия текущего этапа.
+
. Сравните версии и закройте документ.
